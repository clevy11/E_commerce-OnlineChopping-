{"ast":null,"code":"var _jsxFileName = \"D:\\\\clb\\\\Workspace\\\\Tony_project\\\\webtech\\\\onlineshopclient\\\\src\\\\routes\\\\RequireAuth.js\",\n  _s = $RefreshSig$();\nimport { useLocation, Navigate, Outlet } from 'react-router-dom';\nimport useAuth from '../hooks/useAuth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RequireAuth({\n  requiredRoles\n}) {\n  _s();\n  var _auth$profile;\n  const {\n    auth\n  } = useAuth();\n  const location = useLocation();\n  return !(auth !== null && auth !== void 0 && auth.token) ? /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\",\n    state: {\n      from: location\n    },\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 9\n  }, this) : auth !== null && auth !== void 0 && auth.token && !requiredRoles.includes(auth === null || auth === void 0 ? void 0 : (_auth$profile = auth.profile) === null || _auth$profile === void 0 ? void 0 : _auth$profile.role) ? /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/forbidden\",\n    state: {\n      from: location\n    },\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 9\n  }, this);\n}\n_s(RequireAuth, \"7PXqHcZB2FbEKkNQKRwOtlkhUwY=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = RequireAuth;\nexport default RequireAuth;\nvar _c;\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"names":["useLocation","Navigate","Outlet","useAuth","jsxDEV","_jsxDEV","RequireAuth","requiredRoles","_s","_auth$profile","auth","location","token","to","state","from","replace","fileName","_jsxFileName","lineNumber","columnNumber","includes","profile","role","_c","$RefreshReg$"],"sources":["D:/clb/Workspace/Tony_project/webtech/onlineshopclient/src/routes/RequireAuth.js"],"sourcesContent":["import { useLocation, Navigate, Outlet } from 'react-router-dom';\r\nimport useAuth from '../hooks/useAuth';\r\n\r\nfunction RequireAuth({ requiredRoles }) {\r\n  const { auth } = useAuth();\r\n  const location = useLocation();\r\n\r\n\r\n  return (\r\n    !auth?.token\r\n      ? <Navigate to=\"/login\" state={{ from: location }} replace />\r\n      : auth?.token && !requiredRoles.includes(auth?.profile?.role) \r\n      ? <Navigate to=\"/forbidden\" state={{ from: location }} replace /> \r\n      : <Outlet />\r\n  );\r\n}\r\n\r\nexport default RequireAuth;\r\n"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;AAChE,OAAOC,OAAO,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,SAASC,WAAWA,CAAC;EAAEC;AAAc,CAAC,EAAE;EAAAC,EAAA;EAAA,IAAAC,aAAA;EACtC,MAAM;IAAEC;EAAK,CAAC,GAAGP,OAAO,CAAC,CAAC;EAC1B,MAAMQ,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAG9B,OACE,EAACU,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEE,KAAK,iBACRP,OAAA,CAACJ,QAAQ;IAACY,EAAE,EAAC,QAAQ;IAACC,KAAK,EAAE;MAAEC,IAAI,EAAEJ;IAAS,CAAE;IAACK,OAAO;EAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,GAC3DV,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEE,KAAK,IAAI,CAACL,aAAa,CAACc,QAAQ,CAACX,IAAI,aAAJA,IAAI,wBAAAD,aAAA,GAAJC,IAAI,CAAEY,OAAO,cAAAb,aAAA,uBAAbA,aAAA,CAAec,IAAI,CAAC,gBAC3DlB,OAAA,CAACJ,QAAQ;IAACY,EAAE,EAAC,YAAY;IAACC,KAAK,EAAE;MAAEC,IAAI,EAAEJ;IAAS,CAAE;IAACK,OAAO;EAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,gBAC/Df,OAAA,CAACH,MAAM;IAAAe,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAElB;AAACZ,EAAA,CAZQF,WAAW;EAAA,QACDH,OAAO,EACPH,WAAW;AAAA;AAAAwB,EAAA,GAFrBlB,WAAW;AAcpB,eAAeA,WAAW;AAAC,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}